<!DOCTYPE html>
<html>
	<head>
		<title>收费项目</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="cache-control" content="no-cache" />
		<meta http-equiv="pragma" content="no-cache" />
		<link rel="stylesheet" type="text/css" href="/js/easyui/themes/default/easyui.css">
		<link rel="stylesheet" type="text/css" href="/js/easyui/themes/icon.css">
		<script type="text/javascript" src="/js/easyui/jquery.min.js"></script>
		<script type="text/javascript" src="/js/easyui/jquery.easyui.min.js"></script>
		<script type="text/javascript" src="/js/easyui/locale/easyui-lang-zh_CN.js"></script>
		<script>
		
			function fromToJson(fromId){
				var para = new Object();
				var form = $("#"+fromId);
				var inputList = form.find("input");
				for(var i =0;i<inputList.length;i++){
					var node = inputList[i];
					var node = $(node);
					if(node.attr("type")=="hidden"){
						para[node.attr("name")]=node.attr("value");
					}
					
				}
				return para;
			}
		
			
			$(function(){

					$("#grid").datagrid({
						singleSelect:true,
						fit:true,
						fitColumns:true,
						collapsible:true, 
						striped:true,
						rownumbers:true, 
					    columns:[[    
					    	 {field:'ck',checkbox:true},
					        {field:'USER_CODE',title:'用户编码',width:100,align:'left'},    
					        {field:'USER_NAME',title:'用户姓名',width:100,align:'left'}
					    ]],
					    pagination:true,
					    pageSize:10,
					    pageList:[5,10,15,20,30,100]
						/*
					    onClickRow: function(index, row){
					    	var userId = row.user_id;
					    }
					    */
				    });

					//查询
					$("#search").bind("click",function(){
						
						$("#grid").datagrid({
							url:'/admin/userManagement/getUsers',
							method:"POST",
							queryParams: fromToJson("searchForm"),
							loadFilter: function(response){
								if (response.state==200){
									return response.data;
								} else {
									alert(response.msg);
								}
							}
						});
					});
					//添加用户
					$("#addUser").click(function(){
						alert(1);
					});
					//修改用户
					$("#editUser").click(function(){
						var rows = $('#grid').datagrid('getSelections');
						console.log(rows);
						$("#edit_user_code").textbox("setValue",rows[0].USER_ID)
						$("#edit_user_code").textbox("setValue",rows[0].USER_CODE)
						$("#edit_user_name").textbox("setValue",rows[0].USER_NAME)
						
						$("#editUserDialog").dialog({    
						    title: '修改用户',    
						    width: 400,    
						    height: 200,    
						    closed: false,    
						    cache: false,
						    modal: true   
						});  
					});
					
			});
			
		</script>
	</head>
	<body class="easyui-layout">
		
		<div region="north" border="false"   style="width:100%;height:80px;margin-top: 20px;" >
			<form id ="searchForm" method="post">
				<table width="100%">
					
					<tr>
						<td align="right" width="20%">用户编码:</td>
						<td width="20%"  align="left" >
							<input class="easyui-textbox"  name="USER_CODE" style="width:200px"  />
						</td>
					
						<td align="right" width="20%">用户姓名:</td>
						<td width="20%"  align="left">
							<input class="easyui-textbox"  name="USER_NAME" style="width:200px" />
						</td>
						<td width="20%" ></td>
					</tr>
				</table>

			</form>
			<div style="text-align:left;width:40%;float:left">
				<a href="#" id="addUser" class="easyui-linkbutton"	 data-options="iconCls:'icon-add'" >添加</a>
				<a href="#" id="editUser" class="easyui-linkbutton"	 data-options="iconCls:'icon-edit'" >修改</a>
				<a href="#" id="addUser" class="easyui-linkbutton"	 data-options="iconCls:'icon-cancel'" >停用</a>
			</div>
			<div style="text-align:right;width:40%;float:right">
				<a href="#" id="search" class="easyui-linkbutton"	 data-options="iconCls:'icon-search'"  >查询</a>
			</div>

		</div>


		<div region="center" border="false">
			<table id="grid" ></table>
		</div>
		
		
		<!-- 用户信息修改页 -->
		<div style="display:none" id="editUserDialog">
			<form>
				<table width="100%">
					<tr>
						<div style="display:none">
							<input class="easyui-textbox" id="edit_user_id"  name="EDIT_USER_ID" style="width:200px"  />
						</div>
						<td align="right" width="20%">用户编码:</td>
						<td width="20%"  align="left" >
							<input class="easyui-textbox" id="edit_user_code"  name="EDIT_USER_CODE" style="width:200px"  />
						</td>
					<tr>
					</tr>
						<td align="right" width="20%">用户姓名:</td>
						<td width="20%"  align="left">
							<input class="easyui-textbox" id="edit_user_name"  name="EDIT_USER_NAME" style="width:200px" />
						</td>
						<td width="20%" ></td>
					</tr>
				</table>
			</form>
		</div> 
		

	</body>
</html>
